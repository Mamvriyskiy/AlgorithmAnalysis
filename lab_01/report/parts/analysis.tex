\chapter{Аналитическая часть}

Расстояние Левенштейна(редакционное расстояние) -- минимальное количество редакционных операций вставки, 
удаления и замены, необходимых для превращения одной строки в другую.\cite{distances}

Цены операций могут зависеть от вида операций и/или от участвующих в ней символов:
\begin{enumerate}[label=\arabic*)]
	\item $w(a, b)$ --- цена замены символа $a$ на $b$;
	\item $w(\lambda, b)$ --- цена вставки символа $b$;
	\item $w(a, \lambda)$ --- цена удаления символа $a$.
\end{enumerate}

Нам необходимо найти последовательность, минимализирующую суммарную цену. Расстояние Левенштейна 
является частным случаем решения данной зхадачи при:
\begin{itemize}[label=---]
    \item $w(a, a) = 0$;
	\item $w(a, b) = 1$, $a \neq b$, в противном случае замена не происходит;
	\item $w(\lambda, b) = 1$;
	\item $w(a, \lambda) = 1$.
\end{itemize}

Введем понятие M, которое будет обозначать совпадение, то есть $w(a, a) = 0$.

\section{Матричный алгоритм нахождения расстояния Левенштейна}

Расстояние между двумя строками a и b может быть вычислено по формуле 1.1
с использованием матрицы размером (N + 1) * (M + 1) для сохранения соответствующих промежуточных значений. Данный
алгоритм представляет собой построчное заполнение матрицы $A_{|a||b|}$ значениями $D(i, j)$, где 
[i, j] -- значение ячейки. Первая ячейчка заполняется 0, остальные в соответствии с формулой:


\begin{equation}
    \label{eq:D}
    D(i, j) = \begin{cases}
        0 & \text{если } i = 0, j = 0\\
        i & \text{если } j = 0, i > 0\\
        j & \text{если } i = 0, j > 0\\
        \min \lbrace \\
        \qquad D(i, j-1) + 1\\
        \qquad D(i-1, j) + 1 & \text{если } i > 0, j > 0\\
        \qquad D(i-1, j-1) + m(a[i], b[j]) & \text{(1.2)}\\
        \rbrace
    \end{cases}
\end{equation}

а функция \ref{eq:m} определена как:
\begin{equation}
    \label{eq:m}
    m(a, b) = \begin{cases}
        0 & \text{если a = b,}\\
        1 & \text{иначе}\\
    \end{cases}
\end{equation}

Функция D составлена по следущему принципу, где a[i] -- i-ый символ строки a,
b[j] -- j-ый символ строки b, функция D(i, j) определена как:
\begin{enumerate}
    \item Из перевода пустой строки в пустую требуется 0 операций.
    \item Из перевода пустой строки в строку a треубется $|a|$ операций.
    \item Из перевода строки в пустую строку а треубется $|a|$ операций.
    \item Для перевода из строки a в строку b требуется выполнить 
    несколько операций(удаления, добавления, замены). Пусть a' и b' строки 
    a и b без последнего символа, поэтому цена преобразования строки a в строку b 
    может выглядеть следующшим образом:
    \begin{enumerate}[label=\alph*)]
        \item Сумма цены преобразования строки a в b и цена проведения операции
        удаления, которая необходима для преобразования a' в a.
        \item Сумма цены преобразования строки a в b и цены проведения операции
        вставки, которая необходима для преобразования b' в b.
        \item Сумма цены преобразования из a' в b' и цена операции замены, 
        предполагая, что a и b оканчиваются на разные символы.
        \item Сумма цены преобразоания из a' в b', предполагая, что a и b оканчиваются 
        на один и тот же символ.
    \end{enumerate}
\end{enumerate}

Минимальная цена преобразования -- минимальное значение приведенных операций.

\section{Рекурсивный алгоритм нахождения расстояния}
Расстояние Дамерау-Левенштейна\cite{distances} может быть найдено по формуле \ref{eq:d}, которая 
задана как:

\begin{equation}
    \label{eq:d}
    d_{a,b}(i, j) = \begin{cases}
        \max(i, j), &\text{если }\min(i, j) = 0,\\
        \min \lbrace \\
        \qquad d_{a,b}(i, j-1) + 1,\\
        \qquad d_{a,b}(i-1, j) + 1,\\
        \qquad d_{a,b}(i-1, j-1) + m(a[i], b[j]), &\text{иначе}\\
        \qquad \left[ \begin{array}{cc}d_{a,b}(i-2, j-2) + 1, &\text{если }i,j > 1;\\
        \qquad &\text{}a[i] = b[j-1]; \\
        \qquad &\text{}b[j] = a[i-1]\\
        \qquad \infty, & \text{иначе}\end{array}\right.\\
        \rbrace
    \end{cases},
\end{equation}

Данная формула выводится по тем же соображенияем, что и формула \ref{eq:D}, однако, 
в этой формуле добавляется еще одного условие для случая, когда обе строки не пустые. 

Сумма цен преобразования из a'' в b'' и операции перестановки, предполагая, что 
длины a'' и  b'' больше 1 и последние два символа a'', если их поменять местами, совпадут
с последними двумя символами b''.

\section{Рекурсивный алгоритм нахождения расстояния с кэшированием}

Рекурсивная реализация алгоритма Домерау-Левенштейна малоэффективна при больших M и N, 
так как некоторые значения будут вычислены повторно. Для оптимизации данного алгоритма 
можно использовать кэш в виде матрицы для сохранения промежуточных значений.
В таком случае алгоритм предстваляет собой рекурсивное заполнение матрицы $A_{|a||b|}$.
промежуточными значениями D(i, j).

\section{Нерекурсивный алгоритм нахождения расстояния Дамерау-Левенштейна}

Рекурсивная реализация алгоритма Левенштейна с кэшированием малоэффективна по времени при больших M и N. Для быстроты
действия можно использовать нерекурсивный алгоритм. Он предстваляет собой итерационную реализацию заполнения матрицы
промежуточными значениями D(i, j).

В качестве структуры данных для хранения можно использовать матрицу размером:
\begin{equation}
	(N + 1)\\\times(M + 1),
\end{equation}

Значение в ячейке [i, j] равно зачению $D(S1[1...i], S2[1...j])$. Первый элемент заполняется нулем, остальные в 
соответствии с формулой (\ref{eq:d}).

\section{Вывод}
В данном разделе были рассмотрены алгоритмы нахождения расстояния Левенштейна и Дамерау-Левенштейна, который 
учитывает возможность перестановки соседних символов. Формулы Левенштейна и Дамерау-Левенштейна для рассчета расстояния
задаются рекурсивно, следовательно, алгоритмы могут быть реализованы рекурсивно или итерационно.
